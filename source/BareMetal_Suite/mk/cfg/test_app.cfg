ARCH=armv7-r
CPU=cortex-r5
SOC=kunlun
TGT=safe
ROM_BASE=0x40000000
ROM_SIZE=0x100000

APP=test_app
NAME=safe_$(APP)
ifneq ($(D),)
NAME := $(NAME)_debug
endif
BINARY_NAME=$(NAME).elf

RAM_BASE=0x4B0000
RAM_SIZE=0x8000
NMEM_BASE=0xFFFF0000
RAM2_BASE=0x4CFF80
STACK_SZ=0x5000
ROM_PART=1

CFG_CFLAGS += -DCFG_DRV_UART
CFG_CFLAGS += -DCFG_SOC_RAM_ECC -DCFG_ARCH_FPU
CFG_CFLAGS += -DCFG_ARCH_TCM
CFG_CFLAGS += -DCFG_ATB_INIT_MIN_STACK -DCFG_ATB_MIN_STACK_SZ=0x400
CFG_CFLAGS += -DMEMCPY_ASM_OPTIMIZED -DMEMCLR_ASM_OPTIMIZED
CFG_CFLAGS += -DCFG_ARCH_R7_MPU_BG_EN -DCFG_ARCH_LLPP_EN
CFG_CFLAGS += -DCFG_ARCH_DIS_BRANCH_PREDICT
CFG_CFLAGS += -DCFG_RAM_FUNC

IP_MODULE_LIST = testbench pll clk mpu rstgen timer gpio 
IP_MODULE_LIST += analog wdog scr funcsafe uart
IP_MODULE_LIST += i2c/dw_i2c/src io_expander
TIMER_SEL = sdrv_timer
WDOG_SEL = sdrv_wdt
GPIO_SEL = d_ip_gpio
UART_SEL = dwc_uart
CRYPTO_MODULE_LIST = rng #micro-ecc mbedtls 
SERVICE_LIST=srv_timer srv_pin shell

CFG_CFLAGS += -DCFG_CRYPTO_MODULE -DCFG_CRYPTO_PAD_DGST_2_ORDER

CFG_CFLAGS += -DCFG_WDOG_SDRV_WDT -DCFG_SOC_SEM_OWNER
CFG_CFLAGS += -DCFG_RUN_DDR_INIT_SEQ
CFG_CFLAGS += -DCFG_DDR_FW_IN_FLASH -DCFG_DDR_SEQ_IN_FLASH

ifeq ($(BOARD),g9_ref)
CFG_CFLAGS += -DTTY_UART=UART4
CFG_CFLAGS += -DCFG_DRV_I2C
else
CFG_CFLAGS += -DTTY_UART=UART3
endif
CFG_CFLAGS += -DINFO_LEVEL
