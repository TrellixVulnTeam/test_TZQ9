
ARCH=armv7-r
CPU=cortex-r5
SOC=kunlun
TGT=safe

NAME=kunlun_safe_atb
ifneq ($(D),)
NAME := $(NAME)_debug
endif
BINARY_NAME=$(NAME).elf

ROM_BASE=0x00000000
ROM_SIZE=0x20000
RAM_BASE=0x4B0000
RAM_SIZE=0x8000
NMEM_BASE=0xFFFF0000
RAM2_BASE=0x4CFF80
STACK_SZ=0x2000
ROM_PART=1

CFG_CFLAGS += -DROM_VER=0x00010100

CFLAGS_STK_CHK += -fstack-protector-strong
CFG_CFLAGS += -DCFG_SEC_STACK_COOKIE

CFG_CFLAGS += -DCFG_SOC_RAM_ECC -DCFG_ARCH_FPU
CFG_CFLAGS += -DCFG_ARCH_TCM
CFG_CFLAGS += -DCFG_ATB_INIT_MIN_STACK -DCFG_ATB_MIN_STACK_SZ=0x400
CFG_CFLAGS += -DMEMCPY_ASM_OPTIMIZED -DMEMCLR_ASM_OPTIMIZED -DCFG_FAST_FIFO_WR32
CFG_CFLAGS += -DCFG_ARCH_R7_MPU_BG_EN -DCFG_ARCH_LLPP_EN
CFG_CFLAGS += -DCFG_TB_SYS_BOOT_MON_EN
CFG_CFLAGS += -DCFG_ATB_RESOURCE_HANDOVER -DCFG_HANDOVER_SPINOR_ACCESS_PER_MSG
CFG_CFLAGS += -DCFG_ATB_FAILSAFE
CFG_CFLAGS += -DCFG_ARCH_DIS_BRANCH_PREDICT
CFG_CFLAGS += -DCFG_RAM_FUNC

IP_MODULE_LIST = testbench romc pll clk mpu cdns_ospi rstgen timer gpio 
IP_MODULE_LIST += mailbox fuse_ctrl ce analog wdog scr funcsafe
TIMER_SEL = sdrv_timer
WDOG_SEL = sdrv_wdt
GPIO_SEL = d_ip_gpio
CRYPTO_MODULE_LIST = rng #micro-ecc mbedtls 
BT_DEV_LIST = mem_dev spinor prvsn_dev
SERVICE_LIST=log srv_timer srv_pin
CFG_CFLAGS += -DCFG_BT_DEV_SPINOR -DCFG_BT_DEV_PRVSN -DCFG_ATB_PRVSN_BT_ON_FAIL

CFG_CFLAGS += -DCFG_CRYPTO_MODULE -DCFG_CRYPTO_PAD_DGST_2_ORDER
CFG_CFLAGS += -DCFG_DEV_MEM

CFG_CFLAGS += -DCFG_WDOG_SDRV_WDT -DCFG_SOC_SEM_OWNER
CFG_CFLAGS += -DCFG_ROMFIX -DCFG_FUSE_CTRL -DCFG_FUSE_CTRL_CFGer -DCFG_ROMCTRL_PROTECT
CFG_CFLAGS += -DCFG_TST_EXCPT_IGNORE_DABORT
CFG_CFLAGS += -DCFG_SOC_OSPI_WRAPPER_DIV2
